# å¿«é€Ÿå¼€å§‹æŒ‡å—

## åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„å®Œæ•´æ­¥éª¤

### 1. å‡†å¤‡å·¥ä½œ

è¿æ¥åˆ°ä½ çš„äº‘æœåŠ¡å™¨ï¼š
```bash
ssh user@your-server-ip
```

### 2. å…‹éš†æˆ–ä¸Šä¼ ä»£ç 

å°†é¡¹ç›®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–åˆ›å»ºé¡¹ç›®ç›®å½•ï¼š
```bash
mkdir -p ~/qa-system
cd ~/qa-system
```

å°†ä»¥ä¸‹æ–‡ä»¶ä¸Šä¼ åˆ°è¯¥ç›®å½•ï¼š
- `requirements.txt`
- `model.py`
- `embedding_model.py`
- `get_vector.py`
- `main.py`
- `knowledge.txt`
- `install.sh`

### 3. å®‰è£…ä¾èµ–

#### æ–¹æ³•1ï¼šä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
chmod +x install.sh
./install.sh
```

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨å®‰è£…

```bash
# å‡çº§pip
pip3 install --upgrade pip

# å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# å¦‚æœæœ‰GPUï¼ˆå¯é€‰ï¼‰
pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

### 4. å‡†å¤‡çŸ¥è¯†åº“

ç¼–è¾‘æˆ–æ›¿æ¢ `knowledge.txt` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„çŸ¥è¯†åº“å†…å®¹ï¼š

```bash
nano knowledge.txt
# æˆ–
vim knowledge.txt
```

### 5. åˆ›å»ºå‘é‡æ•°æ®åº“

```bash
python3 get_vector.py
```

**é¢„è®¡æ—¶é—´**: é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½8GBçš„embeddingæ¨¡å‹ï¼Œæ ¹æ®ç½‘ç»œé€Ÿåº¦å¯èƒ½éœ€è¦10-30åˆ†é’Ÿã€‚

**è¾“å‡ºç¤ºä¾‹**:
```
å¼€å§‹å¤„ç†çŸ¥è¯†åº“æ–‡ä»¶: knowledge.txt
å·²åŠ è½½æ–‡æ¡£æ•°é‡: 1
åˆ‡åˆ†åçš„æ–‡æ¡£å—æ•°é‡: 15
æ­£åœ¨åŠ è½½åµŒå…¥æ¨¡å‹...
æ­£åœ¨ä»ModelScopeåŠ è½½åµŒå…¥æ¨¡å‹: Qwen/Qwen3-Embedding-4B
ä½¿ç”¨è®¾å¤‡: cuda
åµŒå…¥æ¨¡å‹åŠ è½½å®Œæˆï¼
æ­£åœ¨åˆ›å»ºå‘é‡æ•°æ®åº“...
å‘é‡æ•°æ®åº“å·²ä¿å­˜åˆ°: ./faiss/knowledge
```

### 6. å¯åŠ¨é—®ç­”ç³»ç»Ÿ

```bash
python3 main.py
```

**é¢„è®¡æ—¶é—´**: é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½6GBçš„LLMæ¨¡å‹ï¼Œæ ¹æ®ç½‘ç»œé€Ÿåº¦å¯èƒ½éœ€è¦10-20åˆ†é’Ÿã€‚

**è¾“å‡ºç¤ºä¾‹**:
```
==================================================
æ­£åœ¨åˆå§‹åŒ–QAç³»ç»Ÿ...
==================================================

1. åŠ è½½åµŒå…¥æ¨¡å‹...
æ­£åœ¨ä»ModelScopeåŠ è½½åµŒå…¥æ¨¡å‹: Qwen/Qwen3-Embedding-4B
ä½¿ç”¨è®¾å¤‡: cuda
åµŒå…¥æ¨¡å‹åŠ è½½å®Œæˆï¼

2. åŠ è½½å‘é‡æ•°æ®åº“...
å‘é‡æ•°æ®åº“åŠ è½½å®Œæˆï¼

3. åŠ è½½å¯¹è¯æ¨¡å‹...
æ­£åœ¨ä»ModelScopeåŠ è½½æ¨¡å‹: Qwen/Qwen2.5-3B-Instruct
ä½¿ç”¨è®¾å¤‡: cuda
æ¨¡å‹åŠ è½½å®Œæˆï¼

==================================================
QAç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼
==================================================
```

### 7. å¼€å§‹é—®ç­”

ç³»ç»Ÿå¯åŠ¨åä¼šè¿›å…¥äº¤äº’å¼æ¨¡å¼ï¼š

```
è¿›å…¥äº¤äº’å¼é—®ç­”æ¨¡å¼
è¾“å…¥ 'quit' æˆ– 'exit' é€€å‡º
è¾“å…¥ 'clear' æ¸…ç©ºå¯¹è¯å†å²
--------------------------------------------------

è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: 
```

è¾“å…¥ä½ çš„é—®é¢˜å³å¯è·å¾—åŸºäºçŸ¥è¯†åº“çš„å›ç­”ï¼

## åå°è¿è¡Œï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ç³»ç»ŸæŒç»­è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ `screen` æˆ– `tmux`ï¼š

### ä½¿ç”¨ screen

```bash
# å®‰è£…screen
sudo apt-get install screen  # Ubuntu/Debian
sudo yum install screen       # CentOS

# åˆ›å»ºæ–°ä¼šè¯
screen -S qa-system

# è¿è¡Œç¨‹åº
python3 main.py

# é€€å‡ºä¼šè¯ï¼ˆç¨‹åºç»§ç»­è¿è¡Œï¼‰: Ctrl+A, ç„¶åæŒ‰ D

# é‡æ–°è¿æ¥ä¼šè¯
screen -r qa-system
```

### ä½¿ç”¨ tmux

```bash
# å®‰è£…tmux
sudo apt-get install tmux  # Ubuntu/Debian
sudo yum install tmux       # CentOS

# åˆ›å»ºæ–°ä¼šè¯
tmux new -s qa-system

# è¿è¡Œç¨‹åº
python3 main.py

# é€€å‡ºä¼šè¯ï¼ˆç¨‹åºç»§ç»­è¿è¡Œï¼‰: Ctrl+B, ç„¶åæŒ‰ D

# é‡æ–°è¿æ¥ä¼šè¯
tmux attach -t qa-system
```

## ä½¿ç”¨ systemd æœåŠ¡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š

```bash
sudo nano /etc/systemd/system/qa-system.service
```

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ini
[Unit]
Description=QA System Service
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/path/to/qa-system
ExecStart=/usr/bin/python3 /path/to/qa-system/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl start qa-system
sudo systemctl enable qa-system  # å¼€æœºè‡ªå¯
sudo systemctl status qa-system  # æŸ¥çœ‹çŠ¶æ€
```

## æ€§èƒ½ç›‘æ§

### æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ

```bash
nvidia-smi
# æˆ–æŒç»­ç›‘æ§
watch -n 1 nvidia-smi
```

### æŸ¥çœ‹å†…å­˜ä½¿ç”¨

```bash
free -h
```

### æŸ¥çœ‹ç£ç›˜ç©ºé—´

```bash
df -h
```

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. æ¨¡å‹ä¸‹è½½æ…¢

è®¾ç½®ModelScopeé•œåƒï¼ˆå¦‚æœæœ‰ï¼‰ï¼š
```bash
export MODELSCOPE_CACHE=/path/to/cache
```

### 2. å†…å­˜ä¸è¶³

ä¿®æ”¹ `model.py`ï¼Œä½¿ç”¨è¾ƒå°çš„æ‰¹å¤„ç†æˆ–é‡åŒ–ï¼š
```python
torch_dtype=torch.float16  # ä½¿ç”¨åŠç²¾åº¦
```

### 3. ç«¯å£è¢«å ç”¨ï¼ˆå¦‚æœéœ€è¦WebæœåŠ¡ï¼‰

æ£€æŸ¥ç«¯å£ï¼š
```bash
netstat -tulpn | grep :ç«¯å£å·
```

### 4. æƒé™é—®é¢˜

ç¡®ä¿æœ‰æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x install.sh
chmod +x *.py
```

## ä¸‹ä¸€æ­¥

- æ ¹æ®å®é™…éœ€æ±‚ä¿®æ”¹ `knowledge.txt`
- è°ƒæ•´æ¨¡å‹å‚æ•°ä»¥ä¼˜åŒ–æ€§èƒ½
- é›†æˆWebç•Œé¢ï¼ˆå¯ä»¥ä½¿ç”¨ Gradio æˆ– Streamlitï¼‰
- æ·»åŠ æ—¥å¿—è®°å½•å’Œç›‘æ§

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
